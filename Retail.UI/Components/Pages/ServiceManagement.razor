@page "/service-management"
@using Retail.UI.Models

<PageTitle>Service Management</PageTitle>

<HeadContent>
    <link rel="stylesheet" href="css/dashboard.css" />
</HeadContent>

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>Service Management Console</h1>
        <div class="status-summary">
            <span class="status-item running">üü¢ Service Control Panel</span>
            <span class="status-item stopped">‚ö´ Start/Stop Services</span>
            <span class="status-item error">üî¥ Process Management</span>
        </div>
    </div>

    <ServiceManager />

    <div class="management-info">
        <div class="info-card">
            <h3>üìã How It Works</h3>
            <ul>
                <li><strong>Start Service:</strong> Launches a microservice using <code>dotnet run</code> in its project directory</li>
                <li><strong>Stop Service:</strong> Terminates the running process and frees up the port</li>
                <li><strong>Restart Service:</strong> Stops and then starts the service (useful for applying changes)</li>
                <li><strong>Auto-Detection:</strong> Automatically detects already running services on startup</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>‚ö†Ô∏è Important Notes</h3>
            <ul>
                <li>Services are launched in separate console windows for easy debugging</li>
                <li>Each service runs on its configured port (7001-7005)</li>
                <li>Process management requires appropriate permissions</li>
                <li>Services can also be started manually in separate terminals</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>üîß Troubleshooting</h3>
            <ul>
                <li>If a service fails to start, check the project path and .NET installation</li>
                <li>Port conflicts will prevent services from starting</li>
                <li>Use the health check buttons to verify service connectivity</li>
                <li>Check service logs for detailed error information</li>
            </ul>
        </div>
    </div>
</div>

<style>
    .status-summary {
        display: flex;
        gap: 20px;
        align-items: center;
    }

    .status-item {
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 0.9rem;
    }

    .status-item.running {
        background: #d4edda;
        color: #155724;
    }

    .status-item.stopped {
        background: #e2e3e5;
        color: #383d41;
    }

    .status-item.error {
        background: #f8d7da;
        color: #721c24;
    }

    .management-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }

    .info-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #007bff;
    }

    .info-card h3 {
        margin: 0 0 15px 0;
        color: #333;
        font-size: 1.2rem;
    }

    .info-card ul {
        margin: 0;
        padding-left: 20px;
    }

    .info-card li {
        margin: 8px 0;
        color: #666;
        line-height: 1.5;
    }

    .info-card code {
        background: #f8f9fa;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: monospace;
        color: #e83e8c;
    }
</style>
